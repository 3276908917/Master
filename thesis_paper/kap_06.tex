\chapter{Discussion and Conclusion}
\label{chap: disc_and_conc}

For the same reason as in~\ref{sec: param_breakdown}, we will concentrate
in this chapter exclusively on massive-neutrino emulators.

\section{Summary of the Paper}

What was the main objective of this thesis? What were the key results of this 
work? Why are they important? How do these results compare with results from 
papers on similar subjects?

\section{Emulation over Uncertainties}

\textcolor{blue}{This content should be subsumed into future work, since we
didn't manage to complete this feature in time.}

For a further step of accuracy, we can add a third data set to our pipeline
and introduce a second layer of emulation.

Up to this point, our pipeline has included a training set and a testing set.
If we add a validation set, then we can train a second emulator over the
errors associated with the first emulator's performance on this validation
set.

Within the current (as of \textcolor{orange}{24.08.2023}) setup of
Cassandra-Linear, we typically generate two Latin hypercubes for each
emulator. The first represents our training set and an emulator cannot be
produced without it. The second one represents our validation set.

\textcolor{orange}{In a future
release of Cassandra-Linear, this set will be used to train an ``uncertainty''
emulator, which will train over the errors from the main emulator in order to
provide the user with an uncertainty estimate for any cosmology located within
the space of priors over which the main emulator was trained.} 

\textcolor{orange}{However, this functionality has not yet been implemented. 
Currently, we are 
using the validation hypercube more as a test hypercube: we compute the 
uncertainties at discrete points and examine these uncertainties (e.g. with
scatterplots and histograms) to assess the performance of the emulator.}


\section{Future Work}
\label{sec: future_work}

Here I will talk about what kinds of questions we estimate will be most 
fruitful for further inquiries about this topic and this code.

%s Theoretical inquiries

Is there a theoretically perfect LHC generator?

%s CLASS versus CAMB again

In order to expand the priors, it would be helpful to investigate why CAMB 
does not allow negative redshifts, in case this can be adapted. Alternatively, 
CLASS \textcolor{green}{allows} negative redshifts, so it may be worthwhile to 
repeat the work of this thesis using power spectra from CLASS. This would 
involve familiarization with a new platform, however, and so this escapes the 
scope of this thesis. Remember that negative redshifts would be a helpful 
feature for this work because it would allow us to investigate much broader 
priors.

% Inquiries using different technologies

Should we use a neural network instead of a Gaussian process for our emulator? 
AndreaP and Alex Eggemeier are already on the job: they are converting COMET 
to a neural network approach. We recommend that the reader follow future COMET 
papers for investigations into this question.

GP's allow natural propagation of
uncertainty in predictions to the final posterior distribution; neural
networks lack this feature. At the same time, NNs provide larger speedups 
\textcolor{green}{CITATIONS}. We performed limited testing of a neural network
but did not allocate enough time to arrive at conclusive / quantitative
comparisons.

Symbolic regression for the perfect $A_s$ formula?
As mentioned in section~\ref{sec: fit_testing}.
Of course, we would 
like to reiterate that, though we have applied a symbolic regression approach 
in order to independently justify our analytical expression from
chapter~\ref{chap: A_s}, this by no means guarantees that we have found the 
optimal analytical expression.

%s Code improvements

The code should be expanded with documentation and unit tests. Also, the
user interface script is still in progress.

To simplify the user experience, this two-emulator solution lives ``under the
hood'' and by default \textcolor{orange}{will be} hidden behind an interface
which automatically queries the correct emulator given some user-input
cosmology.

We want to build an emulator over the validation set in order to quote an 
uncertainty to the user and to try to further correct for errors? I'm not sure 
I understood that last part, we would have to ask Ariel again.

Extend the two-emulator solution to create emulators with different mass
hierarchies. Mass hierarchy should also be an option to specify in the
scenario file, like: degenerate, normal, inverted, both normal and inverted. 
Remember to scale the mnu correctly to bridge the gap between degenerate and
normal that we observed when playing around.

\textcolor{orange}{The integration of 
multiple emulators into one user-facing script can be further exploited with, 
for example, different emulators for different neutrino mass hierarchies.}

(For example, $\sigma_{12}^2$ sampling--although we did not
get it to work, the infrastructure is still there for whomever comes along in
the future. This suggestion builds on the concepts of
section~\ref{sec: lhc_outline}.)

